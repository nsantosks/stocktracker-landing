/* --- VARIABLES GLOBALES (COLORES) --- */
:root {
/* Bloques del Canvas */
--color-partners: #8CC152;   /* Socios Clave 5D9CEC*/
--color-activities: #8CC152; /* Actividades Clave 5D9CEC*/
--color-resources: #8CC152;  /* Recursos Clave 5D9CEC*/
--color-value: #E9573F;      /* Propuesta de Valor */
--color-relations: #5D9CEC;  /* Relación Clientes 8CC152*/
--color-channels: #5D9CEC;   /* Canales 8CC152*/
--color-segments: #5D9CEC;   /* Segmentos 8CC152*/
--color-cost: #F6BB42;       /* Estructura de Costos */
--color-revenue: #F6BB42;    /* Fuente de Ingresos */

/* Bloques del fondo canvas*/
--color-bg-left: #f0f7e6; /*Color de izquierda eaf2fb*/ 
--color-bg-right: #eaf2fb; /*Color de derecha f0f7e6*/ 
--color-bg-center: #fdeaea; /*Color de centro fdeaea*/
--color-bg-left-down: #fef8e6; /*Color de izquierda abajo fef8e6*/
--color-bg-right-down: #fef8e6; /*Color de derecha abajo fef8e6*/

/* Interfaz General */
--bg-dark: #2C3E50;          /* Fondo oscuro / Botones primarios */
--bg-light: #ecf0f1;         /* Fondos claros */
--bg-body: #f4f6f8;          /* Fondo de la página */
--text-main: #333;           /* Color de texto principal */

/* Botones Específicos */
--btn-open: #2A82E4;         /* Color botón Abrir */
--btn-copy: #2A82E4;         /* Color botón Copiar */
--btn-excel: #217346;        /* Color botón Excel */
--btn-pdf: #D32F2F;          /* Color botón PDF */
--btn-help: #3498db;         /* Color botón Ayuda */
}

/* --- ESTILOS GENERALES --- */
body { 
font-family: 'Poppins', sans-serif; 
margin: 0; 
background-color: var(--bg-body); 
color: var(--text-main); 
}

/* --- HEADER & CONTROLES --- */
.header { 
background: white; 
padding: 15px 30px; 
display: flex; 
justify-content: space-between; 
align-items: center; 
box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
position: sticky; 
top: 0; 
z-index: 100; 
}
.header h1 { margin: 0; font-size: 1.5rem; color: var(--bg-dark); }
.controls { display: flex; gap: 8px; flex-wrap: wrap; }

button { 
padding: 8px 12px; 
border: none; 
border-radius: 5px; 
cursor: pointer; 
font-weight: 600; 
transition: 0.2s; 
display: flex; 
align-items: center; 
gap: 5px; 
font-size: 0.85rem; 
}
button:hover { opacity: 0.9; transform: translateY(-1px); }

.btn-primary { background: var(--bg-dark); color: white; }
.btn-outline { border: 1px solid var(--bg-dark); background: transparent; color: var(--bg-dark); }
.btn-copy { background: var(--btn-copy); color: white; }
.btn-excel { background: var(--btn-excel); color: white; }
.btn-pdf { background: var(--btn-pdf); color: white; }

/* --- BARRA DE METADATOS (INPUTS SUPERIORES) --- */
.meta-bar { 
background: #fff; 
padding: 15px 30px; 
margin-bottom: 20px; 
display: flex; 
gap: 20px; 
align-items: center; 
border-bottom: 1px solid #ddd; 
flex-wrap: wrap; 
}
.input-group { display: flex; flex-direction: column; min-width: 150px; }
.input-group label { font-size: 0.7rem; color: #777; margin-bottom: 3px; font-weight: bold; }
.input-group input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; background: #fafafa; }
#idCanvas { width: 100%; font-family: monospace; font-size: 0.8rem; }

/* --- GRID DEL CANVAS (EL LIENZO) --- */
.canvas-container {
display: grid;
grid-template-columns: repeat(5, 1fr);
grid-template-rows: auto auto 100px;
gap: 10px;
max-width: 1400px;
margin: 0 auto;
padding: 20px;
background: white;
box-shadow: 0 0 20px rgba(0,0,0,0.1);
}
.canvas-box { 
border-radius: 8px; 
padding: 15px; 
min-height: 200px; 
cursor: pointer; 
position: relative; 
transition: all 0.2s; 
border: 1px solid rgba(0,0,0,0.05); 
display: flex; 
flex-direction: column; 
}
.canvas-box:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); z-index: 2; }
.box-title { font-weight: 700; text-transform: uppercase; font-size: 0.8rem; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
.box-number { position: absolute; top: 10px; right: 10px; opacity: 0.2; font-weight: 900; font-size: 1.5rem; }
.box-content { font-size: 0.85rem; white-space: pre-wrap; color: #444; flex-grow: 1; overflow: hidden; line-height: 1.4; }

/* Posiciones y Colores Específicos */
.c-partners { grid-row: 1 / 3; grid-column: 1; background: var(--color-bg-left); border-left: 5px solid var(--color-partners); }
.c-activities { grid-row: 1; grid-column: 2; background: var(--color-bg-left); border-left: 5px solid var(--color-activities); min-height: 150px;}
.c-resources { grid-row: 2; grid-column: 2; background: var(--color-bg-left); border-left: 5px solid var(--color-resources); min-height: 150px;}
.c-value { grid-row: 1 / 3; grid-column: 3; background: var(--color-bg-center); border-left: 5px solid var(--color-value); }
.c-relations { grid-row: 1; grid-column: 4; background: var(--color-bg-right); border-left: 5px solid var(--color-relations); min-height: 150px;}
.c-channels { grid-row: 2; grid-column: 4; background: var(--color-bg-right); border-left: 5px solid var(--color-channels); min-height: 150px;}
.c-segments { grid-row: 1 / 3; grid-column: 5; background: var(--color-bg-right); border-left: 5px solid var(--color-segments); }
.c-cost { grid-row: 3; grid-column: 1 / 3; background: var(--color-bg-left-down); border-left: 5px solid var(--color-cost); min-height: 100px !important;}
.c-revenue { grid-row: 3; grid-column: 3 / 6; background: var(--color-bg-right-down); border-left: 5px solid var(--color-revenue); min-height: 100px !important;}

/* --- MODALES (VENTANAS EMERGENTES) --- */
.modal-overlay { 
position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 1000; 
}
.modal { 
background: white; width: 90%; max-width: 600px; border-radius: 10px; padding: 25px; 
box-shadow: 0 10px 40px rgba(0,0,0,0.3); animation: slideDown 0.3s ease; 
}
@keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* Modal de Edición */
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.modal-header h2 { margin: 0; color: var(--bg-dark); }
.modal-guide { background: #f9f9f9; padding: 15px; border-radius: 5px; font-size: 0.9rem; margin-bottom: 15px; border-left: 4px solid var(--bg-dark); color: #555; }
textarea { width: 100%; height: 150px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: 'Poppins', sans-serif; resize: vertical; margin-bottom: 15px; box-sizing: border-box; }

/* Modal Lista de Archivos */
.modal-list-container { max-width: 800px; height: 80vh; display: flex; flex-direction: column; }
.search-area { display: flex; gap: 10px; margin-bottom: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px; flex-wrap: wrap; }
.search-input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px; min-width: 200px; }
.file-list { flex: 1; overflow-y: auto; border: 1px solid #eee; border-radius: 5px; }
.file-row { display: grid; grid-template-columns: 2fr 1fr 1fr 2fr; padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; transition: background 0.1s; align-items: center; }
.file-row:hover { background-color: #f0f7ff; }
.file-header { background: #eee; font-weight: bold; color: #555; position: sticky; top: 0; }
.file-id { font-family: monospace; font-size: 0.75rem; color: #888; text-overflow: ellipsis; overflow: hidden; }

/* --- BOTÓN Y CAJA DE AYUDA (NUEVO) --- */
.btn-help-icon {
background: white; border: 2px solid var(--btn-help); color: var(--btn-help);
width: 30px; height: 30px; border-radius: 50%;
font-weight: bold; font-size: 1.1rem; cursor: pointer;
display: flex; justify-content: center; align-items: center;
transition: all 0.2s;
}
.btn-help-icon:hover { background: var(--btn-help); color: white; transform: scale(1.1); }

.help-content-box {
display: none;
background-color: #e8f4fd;
border-left: 4px solid var(--btn-help);
padding: 15px;
margin-bottom: 15px;
border-radius: 4px;
font-size: 0.85rem;
color: #444;
animation: fadeIn 0.3s;
}
.help-title { font-weight: 700; color: #2980b9; margin-bottom: 5px; display: block; }
.help-example { font-style: italic; color: #555; margin-top: 8px; display: block; background: rgba(255,255,255,0.5); padding: 5px; border-radius: 4px;}
@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

/* --- LOADER --- */
.loader { 
display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); 
background: #333; color: white; padding: 10px 25px; border-radius: 30px; 
z-index: 2000; box-shadow: 0 4px 15px rgba(0,0,0,0.2); font-size: 0.9rem; 
}

/* --- RESPONSIVE MOBILE --- */
@media (max-width: 768px) {
.header { flex-direction: column; gap: 10px; align-items: flex-start; }
.meta-bar { flex-direction: column; align-items: stretch; }
.canvas-container { display: flex; flex-direction: column; }
.canvas-box { min-height: 150px; }
.c-cost, .c-revenue { min-height: 120px !important; }
}
@media (max-width: 600px) {
.file-row { grid-template-columns: 1fr; gap: 5px; border-bottom: 2px solid #ddd; }
.file-header { display: none; }
}

/* --- LOGIN & REGISTRO (OVERLAY) --- */
#auth-overlay {
display: flex;
justify-content: center;
align-items: center;
padding: 40px 0; /* Espacio para que respire dentro de la página */
background: transparent; /* Ya no necesita el fondo oscuro */
position: relative; /* Cambiado de fixed a relative */
width: 100%;
min-height: 60vh;
}

.app-section-container {
padding-top: 100px; /* Margen para el header fixed */
padding-bottom: 60px;
}

.auth-card {
background: white;
width: 100%;
max-width: 400px; /* Un poco más ancho para que se vea mejor */
padding: 40px;
border-radius: 20px;
box-shadow: 0 10px 25px rgba(0,0,0,0.05);
border: 1px solid #f0f0f0;
}


.auth-btn {
width: 100%;
padding: 12px;
/* Usamos el azul de tu logo */
background-color: #2A82E4 !important; 
color: white !important;
border: none;
border-radius: 8px;
font-weight: 700;
font-size: 1rem;
cursor: pointer;
margin-top: 20px;
display: block;
transition: all 0.3s ease;
box-shadow: 0 4px 6px rgba(42, 130, 228, 0.2);
}

.auth-btn:hover {
background-color: #1565C0 !important; /* Un azul más oscuro al pasar el mouse */
transform: translateY(-1px);
box-shadow: 0 6px 12px rgba(42, 130, 228, 0.3);
}

.auth-link {
margin-top: 20px; font-size: 0.85rem; color: #555; display: block; cursor: pointer; text-decoration: underline;
}

.auth-logo { color: var(--brand-dark); font-size: 1.8rem; font-weight: 700; margin-bottom: 5px; }
.auth-subtitle { color: #90A4AE; font-size: 0.9rem; margin-bottom: 30px; }

.auth-input {
width: 100%; padding: 12px; margin-bottom: 15px;
border: 1px solid #CFD8DC; border-radius: 6px;
box-sizing: border-box; font-family: 'Poppins', sans-serif;
}

/* Ocultar interfaz principal hasta loguearse */
#main-app { display: none; }
#auth-overlay { display: flex; }
body.logged-in #main-app { display: block; }
body.logged-in #auth-overlay { display: none; }

/* Header User Info */
.user-info { font-size: 0.85rem; color: var(--brand-dark); display: flex; align-items: center; gap: 10px; }
.btn-logout { background: #ECEFF1; color: var(--brand-dark); font-size: 0.8rem; padding: 5px 10px; }

/* --- FOOTER (PIE DE PÁGINA) --- */
.app-footer {
text-align: center;
padding: 30px 20px;
color: #90A4AE;
font-size: 0.85rem;
border-top: 1px solid #eee;
margin-top: 40px;
}

.term-link {
color: var(--brand-blue);
text-decoration: none;
cursor: pointer;
font-weight: 600;
transition: 0.2s;
}
.term-link:hover { text-decoration: underline; color: #1565C0; }

/* --- MODAL DE TÉRMINOS Y CONDICIONES --- */
.terms-scroll-box {
background: #FAFAFA;
border: 1px solid #ddd;
border-radius: 6px;
padding: 20px;
height: 400px; /* Altura fija */
overflow-y: auto; /* Barra de scroll */
text-align: left;
font-size: 0.85rem;
color: #444;
line-height: 1.6;
margin-bottom: 20px;
}
.terms-scroll-box h3 { color: var(--brand-dark); margin-top: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.terms-scroll-box ul { padding-left: 20px; }

#modal-terms {
z-index: 6000 !important;
}